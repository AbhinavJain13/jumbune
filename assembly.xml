<assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
	<id>bin</id>
	<formats>
		<format>jar</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>
	<dependencySets>
		<dependencySet>
			<outputDirectory>examples/example-distribution</outputDirectory>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<unpack>false</unpack>
			<includes>
			<include>${project.groupId}:examples-usregionportouts</include>
			<include>${project.groupId}:examples-wordcount</include>
			<include>${project.groupId}:examples-movierating</include>
			<include>${project.groupId}:examples-bankdefaulters</include>
			<include>${project.groupId}:examples-clickstreamanalysis</include>
			</includes>
		</dependencySet>
		<dependencySet>
			<outputDirectory>agent-distribution</outputDirectory>
			<unpack>false</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-remoting:jar:agent</include>
			</includes>
		</dependencySet>

		<dependencySet>
			<outputDirectory>/</outputDirectory>
			<unpack>true</unpack>
			<unpackOptions>
				<excludes>
				   <exclude>*/DEPENDENCIES</exclude>
				   <exclude>*/LICENSE</exclude>
				   <exclude>*/NOTICE</exclude>
				   <exclude>*/MANIFEST.MF</exclude>
				   <exclude>*/maven/</exclude>
				</excludes>
			</unpackOptions>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-deploy</include>
				<include>com.jcraft:jsch:jar:0.1.51</include>
				<include>org.apache.logging.log4j:log4j-api:jar:2.1</include>
				<include>org.apache.logging.log4j:log4j-core:jar:2.1</include>
			</includes>
		</dependencySet>

		<dependencySet>
			<outputDirectory>modules</outputDirectory>
			<unpack>false</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-web</include>
				<include>${project.groupId}:jumbune-exec</include>
				
				<include>${project.groupId}:jumbune-datavalidation</include>
				<include>${project.groupId}:jumbune-debugger</include>
			</includes>

		</dependencySet>
		
		<dependencySet>
			<outputDirectory>lib</outputDirectory>
			<unpack>false</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>org.ow2.asm:asm:jar:4.0</include>
				<include>org.ow2.asm:asm-tree:jar:4.0</include>
				<include>com.jcraft:jsch:jar:0.1.51</include>
				<include>com.google.code.gson:gson:jar:2.2.4</include>
				<include>org.mortbay.jetty:jetty-runner:jar:8.1.3.v20120416</include>
				<include>org.mortbay.jetty:jetty-runner:jar:8.1.3.v20120416</include>
				<include>org.apache.commons:commons-io:jar:1.3.2</include>
				<include>org.apache.commons:commons-math3:jar:3.0</include>
				<include>${project.groupId}:jumbune-common</include>
				<include>${project.groupId}:jumbune-utils</include>
				<include>${project.groupId}:jumbune-remoting:jar:${project.version}::</include>
				<include>io.netty:netty-handler:jar:4.0.20.Final</include>
				<include>io.netty:netty-buffer:jar:4.0.20.Final</include>
				<include>io.netty:netty-common:jar:4.0.20.Final</include>
				<include>io.netty:netty-codec:jar:4.0.20.Final</include>
				<include>io.netty:netty-transport:jar:4.0.20.Final</include>
				<include>org.apache.logging.log4j:log4j-api:jar:2.1</include>
				<include>org.apache.logging.log4j:log4j-core:jar:2.1</include>
				<include>org.apache.poi:poi:jar:3.8:</include>
				<include>commons-logging:commons-logging:jar:1.2:</include>
				<include>commons-configuration:commons-configuration:jar:1.6:</include>
				<include>commons-lang:commons-lang:jar:2.4:</include>
				<include>org.codehaus.jackson:jackson-mapper-asl:jar:1.8.8:</include>
				<include>org.codehaus.jackson:jackson-core-asl:jar:1.8.8:</include>
				<include>${project.groupId}:jumbune-rumen</include>
			</includes>

		</dependencySet>
		


	</dependencySets>
	<fileSets>
		<fileSet>
			<outputDirectory>bin</outputDirectory>
			<fileMode>0777</fileMode>
			<directoryMode>0777</directoryMode>
			<directory>${project.basedir}/../bin</directory>
		</fileSet>
		<fileSet>
			<outputDirectory>resources</outputDirectory>
			<fileMode>0777</fileMode>
			<directoryMode>0777</directoryMode>
			<directory>${project.basedir}/../common/src/main/resources</directory>
		</fileSet>
		
		<fileSet>
			<directory>${project.basedir}/../examples/src/main/resources/source</directory>
			<outputDirectory>examples/src/</outputDirectory>				
		</fileSet>
		<fileSet>
            <directory>${project.basedir}/../examples/src/main/resources/inputresources</directory>
            <outputDirectory>examples/resources/</outputDirectory>               
        </fileSet>
	</fileSets>
	<files>
		<file>
			<outputDirectory>examples/</outputDirectory>
			<source>${project.basedir}/../examples/src/main/resources/readme.txt</source>
		</file>
		 <file>
		      <source>${project.basedir}/../LICENSE.txt</source>
		      <outputDirectory>/META-INF/</outputDirectory>
		</file>
		 <file>
		      <source>${project.basedir}/../NOTICE.txt</source>
		      <outputDirectory>/META-INF/</outputDirectory>
		</file>
	</files>
</assembly>
